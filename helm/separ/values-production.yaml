# Separ Production Values
# ============================================================================
# These values are optimized for production deployments
# ============================================================================

# =============================================================================
# Separ API Server - Production Configuration
# =============================================================================
separ:
  replicaCount: 3
  
  image:
    pullPolicy: Always  # Always pull to get latest security patches
  
  resources:
    requests:
      cpu: 250m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 20
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80
  
  # Pod disruption budget
  podDisruptionBudget:
    enabled: true
    minAvailable: 2
  
  # Anti-affinity to spread pods across nodes
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                app.kubernetes.io/name: separ
            topologyKey: kubernetes.io/hostname

# =============================================================================
# SpiceDB - Production Configuration
# =============================================================================
spicedb:
  replicaCount: 3
  
  resources:
    requests:
      cpu: 250m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
  
  # Pod disruption budget
  podDisruptionBudget:
    enabled: true
    minAvailable: 2
  
  # Anti-affinity
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                app: spicedb
            topologyKey: kubernetes.io/hostname

# =============================================================================
# Security Configuration
# =============================================================================
networkPolicies:
  enabled: true

# Service mesh integration (if available)
serviceMesh:
  enabled: false

# =============================================================================
# Observability
# =============================================================================
monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: 30s
  
  # Enable tracing if Jaeger/Zipkin is available
  tracing:
    enabled: false
    endpoint: ""
